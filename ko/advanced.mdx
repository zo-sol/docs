---
title: "고급 함수"
description: "파워 유저를 위한 내부 및 고급 함수"
---

<Warning>
이 함수들은 고급/내부용입니다. SDK 동작에 대한 저수준 제어가 필요할 때만 사용하세요.
</Warning>

## 개요

이 고급 함수들은 SDK 내부에 더 깊이 접근할 수 있게 해줍니다. 커스텀 솔루션을 구축하거나 디버깅할 때 유용합니다.

---

## Writer 함수

### `manageRowData()`

테이블의 행 데이터를 관리하는 저수준 함수입니다. 행 작업에 대한 세밀한 제어가 필요할 때 사용합니다.

| **모듈** | `writer` |
|----------|----------|
| **사용 사례** | 커스텀 행 관리, 배치 작업 |

```typescript
import { manageRowData } from 'iqlabs-sdk/writer';

// 고급 행 조작
await manageRowData(connection, signer, {
  dbRootId: 'my-db',
  tableSeed: 'users',
  operation: 'update',
  rowData: JSON.stringify({ id: 1, name: '업데이트된 이름' })
});
```

---

## Reader 함수

### `readUserState()`

주어진 사용자의 UserState PDA를 읽습니다. 프로필 정보, 파일 수 및 기타 사용자 관련 데이터를 반환합니다.

| **모듈** | `reader` |
|----------|----------|
| **사용 사례** | 사용자 프로필 데이터 조회, 업로드 수 확인 |

```typescript
import { readUserState } from 'iqlabs-sdk/reader';

const userState = await readUserState(userPubkey);
console.log('프로필:', userState.profile);
console.log('업로드 수:', userState.fileCount);
```

---

### `readInventoryMetadata()`

사용자의 인벤토리(업로드된 파일)와 관련된 메타데이터를 읽습니다.

| **모듈** | `reader` |
|----------|----------|
| **사용 사례** | 메타데이터와 함께 사용자 파일 목록 조회, 파일 관리 |

```typescript
import { readInventoryMetadata } from 'iqlabs-sdk/reader';

const metadata = await readInventoryMetadata(userPubkey);
metadata.forEach(item => {
  console.log(`파일: ${item.name}, 크기: ${item.size}, 서명: ${item.signature}`);
});
```

---

### `fetchAccountTransactions()`

특정 계정의 모든 트랜잭션을 조회합니다. 트랜잭션 히스토리를 구축하거나 계정 활동을 분석할 때 유용합니다.

| **모듈** | `reader` |
|----------|----------|
| **사용 사례** | 트랜잭션 히스토리, 계정 분석, 디버깅 |

```typescript
import { fetchAccountTransactions } from 'iqlabs-sdk/reader';

const transactions = await fetchAccountTransactions(accountPubkey, {
  limit: 50,
  before: lastSignature // 페이지네이션용
});

transactions.forEach(tx => {
  console.log(`서명: ${tx.signature}, 블록: ${tx.slot}`);
});
```

---

### `getSessionPdaList()`

세션 PDA 목록을 조회합니다. 세션은 임시 또는 상태 있는 상호작용을 관리하는 데 사용됩니다.

| **모듈** | `reader` |
|----------|----------|
| **사용 사례** | 세션 관리, 활성 세션 추적 |

```typescript
import { getSessionPdaList } from 'iqlabs-sdk/reader';

const sessions = await getSessionPdaList(userPubkey);
sessions.forEach(session => {
  console.log(`세션 PDA: ${session.pda}, 활성: ${session.isActive}`);
});
```

---

## 유틸리티 함수

### `deriveDmSeed()`

두 사용자 간의 다이렉트 메시지(DM)를 위한 결정적 시드를 생성합니다. 두 지갑의 순서와 관계없이 동일한 시드가 생성됩니다.

| **모듈** | `utils` / `reader` |
|----------|----------|
| **사용 사례** | 일관된 연결 식별자 생성, DM 채널 설정 |

```typescript
import { deriveDmSeed } from 'iqlabs-sdk/utils';

// 순서는 상관없음 - 어느 쪽이든 같은 시드
const seed1 = deriveDmSeed(walletA, walletB);
const seed2 = deriveDmSeed(walletB, walletA);

console.log(seed1 === seed2); // true
```

---

### `toSeedBytes()`

문자열 시드를 PDA 도출에 필요한 바이트 형식으로 변환합니다.

| **모듈** | `utils` |
|----------|----------|
| **사용 사례** | 커스텀 PDA 도출, 저수준 시드 조작 |

```typescript
import { toSeedBytes } from 'iqlabs-sdk/utils';

const seedString = 'my-custom-seed';
const seedBytes = toSeedBytes(seedString);

// PDA 도출에 사용
const [pda, bump] = PublicKey.findProgramAddressSync(
  [seedBytes, otherSeed],
  programId
);
```

---

## 고급 함수를 사용할 때

<AccordionGroup>
  <Accordion title="커스텀 통합">
    PDA나 트랜잭션 파싱에 직접 접근해야 하는 커스텀 통합을 구축할 때.
  </Accordion>
  <Accordion title="디버깅">
    디버깅 목적으로 원시 계정 데이터나 트랜잭션 히스토리를 검사해야 할 때.
  </Accordion>
  <Accordion title="성능 최적화">
    저수준 함수에 접근하여 작업을 배치하거나 RPC 호출을 줄여야 할 때.
  </Accordion>
  <Accordion title="도구 개발">
    포괄적인 데이터 접근이 필요한 개발자 도구, 익스플로러 또는 분석 대시보드를 만들 때.
  </Accordion>
</AccordionGroup>

---

## 추가 리소스

<CardGroup cols={2}>
  <Card title="GitHub 예제" icon="github" href="https://github.com/IQCoreTeam/IQSdkUsageExampleCliTool">
    IQLabs SDK를 사용한 완전한 예제 프로젝트를 확인하세요.
  </Card>
  <Card title="X (Twitter)" icon="x-twitter" href="https://x.com/IQLabsOfficial">
    업데이트와 공지사항을 팔로우하세요.
  </Card>
</CardGroup>
